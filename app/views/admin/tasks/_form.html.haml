- if @task.errors.any?
  #error_explanation
    %h2= "#{pluralize(@task.errors.count, "error")} prohibited this task from being saved:"
    %ul
      - @task.errors.full_messages.each do |message|
        %li= message
= hidden_field_tag 'admin_id', current_user.id
.field
  = f.label :title
  = f.text_field :title
.field
  = f.label :description
  = f.text_area :description
.field
  = f.label :complexity
  = f.number_field :complexity
.field
  = f.label :status
  =f.select :status, Task.statuses.keys.map { |w| [w.humanize, w] }
.field
  = f.label :project
  = f.collection_select :project_id, Project.all, :id, :title, {include_hidden: false}
.field
  = f.label :developer
  = f.collection_select :user_id, Project.first.users, :id, :email, {include_hidden: false}
.actions
  = f.submit 'Save'

:javascript
  $( document ).on('turbolinks:load', function() {
    $("#task_project_id").change(function(){
      var url = '/admin/users/'+$("#admin_id").val()+'/tasks/list_project_developers'
      $.ajax({
        url: url,
        dataType: 'html',
        type: 'GET',
        data: {project_id: $(this).val()},
        success: function(data){ $("#task_user_id").html(data); }
      });
    })
  })