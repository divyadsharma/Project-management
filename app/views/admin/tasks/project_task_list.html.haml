.row
  %ol.breadcrumb
    %li
      %a{:href => "#"}
        %em.fa.fa-home
    %li.active Project Tasks
.row
  .col-md-12.p-t-15
    .panel.panel-default
      .panel-heading
        %h4 Project Task Listing
      .panel-body
        .x-scrolling-wrapper
          %table.table.table-bordered.table-hover.table-striped
            %thead
              %tr
                %th.list_id_column Project name
                %th Pending
                %th In Progress
                %th Done
            %tbody
              - Project.all.each do |project|
                - tasks = project.tasks
                - tasks_by_status = tasks.group_by(&:status)
                %tr
                  %td
                    .modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :id => "project#{project.id}", :role => "dialog"}
                    = link_to project.title, pie_data_admin_user_tasks_path(current_user, project: project.id), remote: true
                    %td
                      - if tasks_by_status["pending"].present?
                        - tasks_by_status["pending"].each do |task_list|
                          = task_list.title
                          %br
                    %td
                      - if tasks_by_status["in_progress"].present?
                        - tasks_by_status["in_progress"].each do |task_list|
                          = task_list.title
                          %br
                    %td
                      - if tasks_by_status["done"].present?
                        - tasks_by_status["done"].each do |task_list|
                          = task_list.title
                          %br
%script{:src => "https://www.gstatic.com/charts/loader.js", :type => "text/javascript"}
:javascript
  google.charts.load('current', {'packages':['corechart']});